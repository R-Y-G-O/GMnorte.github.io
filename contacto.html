<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="estilos/estilo.css">
    <link rel="stylesheet" href="estilos/navbar.css">
    <link rel="stylesheet" href="estilos/botones.css">
    <link rel="stylesheet" href="estilos/contacto.css">
    <link rel="icon" href="img/logo/favicon.ico" type="image/x-icon">
</head>
<body>

    <div id="navbar-container"></div>

    <div class="container">
        <div class="flex-container">
            <!-- Formulario de contacto -->
            <div class="contact-form">
                <h2>Envíanos un mensaje</h2>
                <form id="contact-form">
                    <div class="input-container">
                        <i class="fas fa-user"></i>
                        <input type="text" name="name" placeholder="Nombre" required>
                    </div>
                    <div class="input-container">
                        <i class="fas fa-envelope"></i>
                        <input type="email" name="email" placeholder="Correo Electrónico" required>
                    </div>
                    <div class="input-container">
                        <i class="fas fa-phone"></i>
                        <input type="tel" name="phone" placeholder="Teléfono" required>
                    </div>
                    <div class="input-container">
                        <i class="fas fa-tag"></i>
                        <input type="text" name="subject" placeholder="Asunto" required>
                    </div>
                    <div class="input-container">
                        <i class="fas fa-comment"></i>
                        <textarea name="message" placeholder="Tu mensaje" rows="5" required></textarea>
                    </div>
                    <!-- Campo oculto para honeypot -->
                    <input type="text" name="honeypot" style="display:none;">
                    <button type="submit">Enviar</button>
                </form>
            </div>

            <!-- Preguntas Frecuentes (FAQs) -->
            <div class="faq">
                <h2>Preguntas Frecuentes</h2>
                <h3><i class="fas fa-headset"></i> ¿Cómo puedo contactarme con atención al cliente?</h3>
                <p>Puedes contactarte con nuestro equipo de atención al cliente llamando al 981092552 o enviando un correo a administracion@gmnorte.com.</p>
                <h3><i class="far fa-clock"></i> ¿Cuál es el horario de atención?</h3>
                <p>Atendemos de lunes a viernes de 9:00 am a 6:00 pm.</p>
                <h3><i class="fas fa-map-marker-alt"></i> ¿Dónde están ubicados?</h3>
                <p>Nuestra sede principal está en Avenida Vice N°282, Urb. Santa Ana - Piura.</p>
                <h3><i class="fas fa-building"></i> ¿Qué tipos de edificaciones construyen?</h3>
                <p>Nos especializamos en edificaciones educativas, comerciales, recreativas, inmobiliarias y de salud, con un enfoque particular en este último.</p>
                <h3><i class="fas fa-star"></i> ¿Tienen experiencia en el mercado nacional?</h3>
                <p>Sí, contamos con una amplia experiencia en el sector de diseño y construcción a nivel nacional.</p>
                <h3><i class="fas fa-file-invoice"></i> ¿Cómo puedo solicitar un presupuesto?</h3>
                <p>Puedes enviarnos un correo a proyectos@gmnorte.com para solicitar un presupuesto personalizado según tus necesidades.</p>
            </div>
        </div>

        <!-- Mapa interactivo -->
        <div class="map">
            <h2><i class="fas fa-map"></i> Encuéntranos aquí</h2>
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3151.835434509964!2d144.96305791532102!3d-37.81627917975186!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6ad642af0f11fd81%3A0xf577f8f3b92b97ac!2sVictoria%20State%20Library!5e0!3m2!1sen!2sau!4v1634500249422!5m2!1sen!2sau" 
                allowfullscreen="" 
                loading="lazy"></iframe>
        </div>
    </div>

    <a class="scroll-to-top" title="Volver arriba">
        <i class="fas fa-chevron-up"></i>
    </a>  
    <a href="https://wa.me/981092552" class="whatsapp-icon" target="_blank" title="Chat con nosotros en WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>
    <footer>
        <div id="pie-container"></div>
    </footer>

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init('Y28WmP_fwZjZfdkmX'); // Reemplaza 'user_tu_usuario' con tu User ID de EmailJS
        })();

        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Evita el envío normal del formulario

            // Verifica si el campo honeypot está vacío
            if (this.honeypot.value) {
                alert('Error: Bot detectado.');
                return; // Si el campo no está vacío, no envía el formulario
            }

            // Lógica para limitar envíos
            const maxSubmissions = 5; // Número máximo de envíos permitidos
            const timeLimit = 60 * 1000; // Tiempo límite en milisegundos (1 minuto)
            const currentTime = Date.now();

            let submissionCount = localStorage.getItem('submissionCount') || 0;
            let firstSubmissionTime = localStorage.getItem('firstSubmissionTime');

            // Si el tiempo límite ha pasado, reinicia el conteo
            if (firstSubmissionTime && currentTime - firstSubmissionTime > timeLimit) {
                submissionCount = 0;
                localStorage.setItem('submissionCount', submissionCount);
                localStorage.removeItem('firstSubmissionTime');
            }

            // Verifica si se supera el límite de envíos
            if (submissionCount >= maxSubmissions) {
                alert('Has alcanzado el límite de envíos. Por favor, inténtalo de nuevo más tarde.');
                return; // No envía el formulario
            }

            // Incrementa el conteo de envíos
            submissionCount++;
            localStorage.setItem('submissionCount', submissionCount);

            // Guarda la hora del primer envío
            if (!firstSubmissionTime) {
                localStorage.setItem('firstSubmissionTime', currentTime);
            }

            emailjs.sendForm('service_syq9sgg', 'template_84c5f58', this) // Reemplaza con tu Service ID y Template ID
                .then(function() {
                    alert('¡Mensaje enviado correctamente!');
                    document.getElementById('contact-form').reset(); // Reinicia el formulario
                }, function(error) {
                    alert('Error al enviar el mensaje: ' + JSON.stringify(error));
                });
        });
    </script>

    <script>
        // Interactividad para las preguntas frecuentes (FAQs)
        document.querySelectorAll('.faq h3').forEach(item => {
            item.addEventListener('click', () => {
                const content = item.nextElementSibling;

                // Cierra otras preguntas si están abiertas
                document.querySelectorAll('.faq p').forEach(p => {
                    if (p !== content) {
                        p.classList.remove('show'); // Cierra la respuesta
                    }
                });

                // Alterna la visibilidad de la pregunta actual
                content.classList.toggle('show');
            });
        });
    </script>

    <script src="js/navbar.js"></script>
    <script src="js/scroll.js" defer></script>

</body>
</html>
